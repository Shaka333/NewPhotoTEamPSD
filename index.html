<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Viewer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="team-grid" id="team-grid"></div>
    </div>

    <!-- Cargar psd.js desde una copia local -->
    <script src="https://cdn.jsdelivr.net/npm/psd.js@3.4.0/dist/psd.min.js"></script>

    <!-- Cargar jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script>
        $(document).ready(function () {
            const baseGitHubURL = "https://raw.githubusercontent.com/Shaka333/NewPhotoTEamPSD/main/team";

            const teamMembers = ["KarenAlejandra", "Leonardo", "MillerTorres", "MonicaG"];
            const directions = ["default", "looking-left", "looking-up-left", "looking-up", 
                                "looking-up-right", "looking-down-left", "looking-down",
                                "looking-down-right", "looking-right"];

            function loadPsdImages(member, container) {
                const psdURL = `${baseGitHubURL}/${encodeURIComponent(member)}.psd`;
                PSD.fromURL(psdURL).then(psd => {
                    const layers = psd.tree().children();
                    layers.forEach(layer => {
                        if (directions.includes(layer.name)) {
                            const imgElement = new Image();
                            imgElement.src = layer.toPng().src;
                            imgElement.className = layer.name;
                            imgElement.alt = layer.name;
                            imgElement.style.display = layer.name === "default" ? "block" : "none";
                            container.append(imgElement);
                        }
                    });
                }).catch(error => {
                    console.error(`Error al cargar el PSD de ${member}:`, error);
                });
            }

            teamMembers.forEach(member => {
                const memberDiv = $(`
                    <div class="team-member" data-member="${member}">
                        <div class="hover-name">${member}</div>
                    </div>
                `);
                loadPsdImages(member, memberDiv);
                $("#team-grid").append(memberDiv);
            });

            $(document).on("mousemove", function (e) {
                $(".team-member").each(function () {
                    const rect = this.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    const deltaX = e.clientX - centerX;
                    const deltaY = e.clientY - centerY;

                    const angle = Math.atan2(deltaY, deltaX) * 180 / Math.PI;
                    const member = $(this);
                    member.find("img").hide();

                    if (angle >= -22.5 && angle < 22.5) {
                        member.find(".looking-left").show();
                    } else if (angle >= 22.5 && angle < 67.5) {
                        member.find(".looking-down-left").show();
                    } else if (angle >= 67.5 && angle < 112.5) {
                        member.find(".looking-down").show();
                    } else if (angle >= 112.5 && angle < 157.5) {
                        member.find(".looking-down-right").show();
                    } else if (angle >= 157.5 || angle < -157.5) {
                        member.find(".looking-right").show();
                    } else if (angle >= -157.5 && angle < -112.5) {
                        member.find(".looking-up-right").show();
                    } else if (angle >= -112.5 && angle < -67.5) {
                        member.find(".looking-up").show();
                    } else if (angle >= -67.5 && angle < -22.5) {
                        member.find(".looking-up-left").show();
                    } else {
                        member.find(".default").show();
                    }
                });
            });
        });
    </script>
</body>
</html>



